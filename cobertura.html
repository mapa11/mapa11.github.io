<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Estrategia Expansión Cobertura</title>
        <!-- Bootstrap core CSS -->
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="style.css" rel="stylesheet">
        <link rel="stylesheet" href="css/froala_blocks.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="src/plugins/L.Control.Sidebar.css">
        <link rel="stylesheet" href="src/plugins/easy-button.css">
        <link rel="stylesheet" href="css/qgis2web.css"><link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/filter.css">
        <link rel="stylesheet" href="src/jquery-ui.min.css">
        <link rel="stylesheet" href="css/nouislider.min.css">
        <link rel="stylesheet" href="css/MarkerCluster.css">
        <link rel="stylesheet" href="css/MarkerCluster.Default.css">
        <style>
            #map {
                    height: 700px;
                 }
            
            #side_panel {
                    height: 500px;
                }
            .center {
                    display: block;
                    margin-left: auto;
                    margin-right: auto;
                    width: 50%;
                    }
                .inline {
                display:inline-block;
                margin-right:5px;
                margin-left:7px;
                }
        </style>
    </head>
    <body>
        <div class="container">
</div>
        <img src="assets/img/logo.jpg" class="center">
        <header class="bg-dark h-100" data-pg-dyn-id="did_13">
            <div class="container text-center">
                <nav class="navbar">
                    <h2> Ampliación de cobertura para una transición de Sexto Primaria a Primero Básico del 100% </h2>
                    <a class="ml-auto mr-auto" href=""> </a>
                </nav>
            </div>
        </header>
        <div class="row">
            <div class="col-md-3">
                <h2 style="color:darkblue;text-align:center;">Departamento</h2> 
                <p style="color:black;text-align:center; padding:10px;">Seleccione el departamento para desplegar la información a nivel municipal</p>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        
                        <div id="menup"></div>
                        <div id="caspa"></div>  
                    </div>
                    
                </div>
            </div>
            <div id="map" class="col-md-9">
                <h2 style="color:black;text-align:center; padding:10px;">El mapa cargará en unos segundos...</h2>

                <div id="sidebar">
                <h3></h3> 
               
                    
                </div>
                
            </div>
        </div>
        <!-- Bootstrap core JavaScript
    ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <div class="row">
         
            <div id="tables" class="col-md-12 ml-3 mr-5 pl-3 pr-4 pr-5">
                <h3>Datos</h3>
                <table id="tbody_Municipio" class="table"> 
                    <thead> 
                        <tr> 
                            <th>Departamento</th> 
                            <th>Secciones</th> 
                            <th>Salarios Q.</th>
                            <th>Infraestructura Q.</th>
                            <th>Mobiliario Q.</th>
                            <th>Servicios de Apoyo Q. </th>
                            <th>Total Q.</th> 
                        </tr>                         
                    </thead>                     
                    <tbody> 
                        <tr> 
                            <td>Nacional</td>
                            <td>3,195</td> 
                            <td>285,998,639</td> 
                            <td>682,852,453</td> 
                            <td>26,425,080</td>
                            <td>38,325,600</td>
                            <td>1,033,601,772</td>
                        </tr>                         
                    </tbody>                     
                </table>                 
                <p></p> 
            </div>
        </div>
        <footer class="fdb-block footer-small bg-dark">
            <div class="container">
                <div class="row text-center align-items-center">
                    <div class="col">
                        <ul class="nav justify-content-center">
                            <li class="nav-item">
                                <a class="nav-link active" href="http://odk.exitoescolar.org/ODA/index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="http://odk.exitoescolar.org/indiceMapas/">Mapas</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="http://odas.exitoescolar.org/oportunidades/">ODAS</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="http://odk.exitoescolar.org/infraestructuraMINEDUC/">Infraestructura</a>
                            </li>
                            <li class="nav-item">
</li>
                        </ul>
                        <p class="h5 mt-5">&copy; 2020&nbsp;</p>
                    </div>
                </div>
            </div>
        </footer>
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/popper.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/leaflet.markercluster.js"></script>
        <script src="src/plugins/L.Control.Sidebar.js"></script>
        <script src="src/plugins/easy-button.js"></script>
        <script src="src/jquery-3.4.1.min.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/tailDT.js"></script>
        <script src="js/nouislider.min.js"></script>
        <script src="js/wNumb.js"></script>
        <script src="data/Inversion_cobertura_1.js"></script>
        <script src="data/depto2_1.js"></script>
        <script src="data/Cuadrantes_2.js"></script>
        
        
        <script>
        var ctlEasybutton;
        var ctlSidebar;

        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;
            highlightLayer.openPopup();
        }
        var map = L.map('map', {
            zoomControl:true, maxZoom:24, minZoom:6
        }).fitBounds([[13.737092433734055,-92.74230349807381],[18.02003185718211,-87.51780634614654]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        
        
        ctlSidebar = L.control.sidebar('sidebar').addTo(map);
        ctlEasybutton = L.easyButton('fas fa-info-circle', function(){
                   ctlSidebar.toggle(); 
                }).addTo(map);
            
            
            
                map.createPane('pane_OpenStreetMap_0');
        map.getPane('pane_OpenStreetMap_0').style.zIndex = 400;
        var layer_OpenStreetMap_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            pane: 'pane_OpenStreetMap_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 6,
            maxZoom: 24,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_0;
        map.addLayer(layer_OpenStreetMap_0);
        function pop_Inversion_cobertura_1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Municipio</th>\
                        <td>' + (feature.properties['Municipio'] !== null ? autolinker.link(feature.properties['Municipio'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Departamento</th>\
                        <td>' + (feature.properties['departamen'] !== null ? autolinker.link(feature.properties['departamen'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Estudiantes Sin Cupo</th>\
                        <td>' + (feature.properties['Estudiantes Sin Cupo'] !== null ? autolinker.link(feature.properties['Estudiantes Sin Cupo'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Secciones</th>\
                        <td>' + (feature.properties['Secciones'] !== null ? autolinker.link(feature.properties['Secciones'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Salarios</th>\
                        <td>' + (feature.properties['Salarios'] !== null ? autolinker.link(feature.properties['Salarios'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Infraestructura</th>\
                        <td>' + (feature.properties['Infraestructura'] !== null ? autolinker.link(feature.properties['Infraestructura'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Mobiliario</th>\
                        <td>' + (feature.properties['Mobiliario'] !== null ? autolinker.link(feature.properties['Mobiliario'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Servicios</th>\
                        <td>' + (feature.properties['Servicios Apoyo'] !== null ? autolinker.link(feature.properties['Servicios Apoyo'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Total</th>\
                        <td>' + (feature.properties['Total'] !== null ? autolinker.link(feature.properties['Total'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Inversion_cobertura_1_0(feature) {
            if (feature.properties['Estudiantes Sin Cupo'] >= 0.000000 && feature.properties['Estudiantes Sin Cupo'] <= 78.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,255,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 78.000000 && feature.properties['Estudiantes Sin Cupo'] <= 294.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,230,230,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 294.000000 && feature.properties['Estudiantes Sin Cupo'] <= 540.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,204,204,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 540.000000 && feature.properties['Estudiantes Sin Cupo'] <= 843.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,179,179,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 843.000000 && feature.properties['Estudiantes Sin Cupo'] <= 1125.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,153,153,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 1125.000000 && feature.properties['Estudiantes Sin Cupo'] <= 1389.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,128,128,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 1389.000000 && feature.properties['Estudiantes Sin Cupo'] <= 1707.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,102,102,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 1707.000000 && feature.properties['Estudiantes Sin Cupo'] <= 2094.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,76,76,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 2094.000000 && feature.properties['Estudiantes Sin Cupo'] <= 2616.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,51,51,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 2616.000000 && feature.properties['Estudiantes Sin Cupo'] <= 3660.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,25,25,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['Estudiantes Sin Cupo'] >= 3660.000000 && feature.properties['Estudiantes Sin Cupo'] <= 4446.000000 ) {
                return {
                pane: 'pane_Inversion_cobertura_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,0,1.0)',
                interactive: true,
            }
            }
        }
        map.createPane('pane_Inversion_cobertura_1');
        map.getPane('pane_Inversion_cobertura_1').style.zIndex = 401;
        map.getPane('pane_Inversion_cobertura_1').style['mix-blend-mode'] = 'normal';
        var layer_Inversion_cobertura_1 = new L.geoJson(json_Inversion_cobertura_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Inversion_cobertura_1',
            layerName: 'layer_Inversion_cobertura_1',
            pane: 'pane_Inversion_cobertura_1',
            onEachFeature: pop_Inversion_cobertura_1,
            style: style_Inversion_cobertura_1_0,
        });
        bounds_group.addLayer(layer_Inversion_cobertura_1);
        map.addLayer(layer_Inversion_cobertura_1);


        function pop_Cuadrantes_2(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Total sin cupo</th>\
                        <td>' + (feature.properties['TotalAfuer'] !== null ? autolinker.link(feature.properties['TotalAfuer'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Secciones</th>\
                        <td>' + (feature.properties['Secciones'] !== null ? autolinker.link(feature.properties['Secciones'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Costo Salarios</th>\
                        <td>' + (feature.properties['Salarios'] !== null ? autolinker.link(feature.properties['Salarios'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Costo Infraestructura</th>\
                        <td>' + (feature.properties['Infraestru'] !== null ? autolinker.link(feature.properties['Infraestru'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Costo Mobiliario</th>\
                        <td>' + (feature.properties['Mobiliario'] !== null ? autolinker.link(feature.properties['Mobiliario'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Costo Servicios</th>\
                        <td>' + (feature.properties['Servicios_'] !== null ? autolinker.link(feature.properties['Servicios_'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Costo Total</th>\
                        <td>' + (feature.properties['Total'] !== null ? autolinker.link(feature.properties['Total'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Cuadrantes_2_0() {
            return {
                pane: 'pane_Cuadrantes_2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(253,204,138,0.0)',
                interactive: true,
            }
        }
        map.createPane('pane_Cuadrantes_2');
        map.getPane('pane_Cuadrantes_2').style.zIndex = 402;
        map.getPane('pane_Cuadrantes_2').style['mix-blend-mode'] = 'normal';
        var layer_Cuadrantes_2 = new L.geoJson(json_Cuadrantes_2, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Cuadrantes_2',
            layerName: 'layer_Cuadrantes_2',
            pane: 'pane_Cuadrantes_2',
            onEachFeature: pop_Cuadrantes_2,
            style: style_Cuadrantes_2_0,
        });
        bounds_group.addLayer(layer_Cuadrantes_2);
     //   map.addLayer(layer_Cuadrantes_2);

        
        var baseMaps = {};

        L.Control.Layers.include({
  getOverlays: function() {
    // create hash to hold all layers
    var control, layers;
    layers = {};
    control = this;
      

          // loop thru all layers in control
    control._layers.forEach(function(obj) {
      var layerName;

      // check if layer is an overlay
      if (obj.overlay) {
        // get name of overlay
        layerName = obj.name;
        // store whether it's present on the map or not
        return layers[layerName] = control._map.hasLayer(obj.layer);
      }
    });

    return layers;
  }
});


        var control = new L.control.layers(baseMaps,{'Inversion_cobertura<br /><table><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_0780.png" /></td><td>0 - 78</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_782941.png" /></td><td>78 - 294</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_2945402.png" /></td><td>294 - 540</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_5408433.png" /></td><td>540 - 843</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_84311254.png" /></td><td>843 - 1125</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_112513895.png" /></td><td>1125 - 1389</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_138917076.png" /></td><td>1389 - 1707</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_170720947.png" /></td><td>1707 - 2094</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_209426168.png" /></td><td>2094 - 2616</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_261636609.png" /></td><td>2616 - 3660</td></tr><tr><td style="text-align: center;"><img src="legend/Inversion_cobertura_1_3660444610.png" /></td><td>3660 - 4446</td></tr></table>': layer_Inversion_cobertura_1, '<img src="legend/Cuadrantes_2.png" /> Cuadrantes': layer_Cuadrantes_2,"OpenStreetMap": layer_OpenStreetMap_0,},{collapsed:false}).addTo(map);
        setBounds();

        
        

        var tablon = document.getElementById("tbody_Municipio");
        for (var i = 0; i < json_depto2_1.features.length; i++) {

            var properties = json_depto2_1.features[i].properties;
            var row = tablon.insertRow(-1);
            function formatNumber(num) {
  if(isNaN(num)){
    return  "Q. " + num.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
  }
  else{
     return "Q. " + num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,'); 
  }
}
            
            row.insertCell(0).innerHTML = properties.nombre;
            row.insertCell(1).innerHTML = properties.Secciones;
            row.insertCell(2).innerHTML = formatNumber(properties.Salarios);
            row.insertCell(3).innerHTML = formatNumber(properties.Infraestructura);
            row.insertCell(4).innerHTML = formatNumber(properties.Mobiliario);
            row.insertCell(5).innerHTML = formatNumber(properties.Servicios_apoyo);
            row.insertCell(6).innerHTML = formatNumber(properties.Total);


        }

        
        $(document).ready(function(){
              $('#sidebar').html( "<h3 style='text-align:center';>Información</h3> <p> En este mapa se presenta información sobre el cálculo de la expansión de cobertura necesaria para que todos los estudiantes del sector oficial que finalizan exitosamente el sexto grado tengan un cupo asegurado en primero, segundo y tercero básico en un instituto del Ciclo Básico de los sectores oficial, municipal o por cooperativa. El cálculo se hizo de tal forma que los estudiantes no deban recorrer más de 10 kilómetros para asistir al instituto. Para poder visualizar la información de la mejor forma debe interactuar con los controles de la página, los cuales se muestran a continuación:</p> <h4>Control de capas</h4> <p> Del lado derecho del mapa se encuentra el panel de capas, en el cual puede seleccionar la capa que desea visualizar. Note que la capa activa es la que se visualiza. Si bien se pueden seleccionar varias capas, solo existe una única capa activa y es la capa seleccionada que se encuentra por encima del resto. Por defecto el mapa al cargar establece a la capa Inversión Cobertura, como la capa activa. La capa cuadrantes muestra la información sobre la expansión de cobertura en cuadrantes de 10 kilómetros. Si desea visualizarla, debe deseleccionar la capa superior y seleccionar la capa que desea visualizar. La selección de las capas afecta la capa que se muestra en el mapa y los datos que se muestran en la tabla.</p> <p style='color:blue;'>NOTA: Se recomienda no tener seleccionada la capa cuadrantes al seleccionar los filtros puesto que pueden ocurrir errores. </p> <h4>Panel de filtros</h4> <p>Del lado izquierdo se encuentra el panel de filtros, donde se pueden filtrar por departamento, a fin de desplegar la información a nivel municipal para el departamento seleccionado. La selección del filtro afecta lo que se despliega en el mapa y lo que se despliega en la tabla.</p> <p style='color:blue;'> NOTA: Una vez utilizado los filtros, para cargar nuevamente la tabla a nivel nacional debe refrescar la página.</p> <p style='color:blue;'> NOTA: Una vez utilizado los filtros, para cargar nuevamente la tabla a nivel nacional debe refrescar la página.</p> " );
            });
        
            
            
        var mapDiv = document.getElementById('caspa');
        var row = document.createElement('div');
        row.className="row";
        row.id="all";
        row.style.height = "80%";
        var col1 = document.createElement('div');
        col1.className="col9";
        col1.id = "mapWindow";
        col1.style.height = "99%";
        col1.style.width = "60%";
        col1.style.display = "inline-block";
        var col2 = document.createElement('div');
        col2.className="col3";
        col2.id = "menu";
        col2.style.display = "inline-block";
        mapDiv.parentNode.insertBefore(row, mapDiv);
        document.getElementById("all").appendChild(col1);
        document.getElementById("all").appendChild(col2);
        col1.appendChild(mapDiv)
        var Filters = {"departamen": "str"};
        
        var mydata = [];
        var toogle = 1;

        function activa(){
          map.eachLayer
          function getKeyByValue(object, value) {
            return Object.keys(object).find(key => object[key] === value);
          }
          mydata=[];

          var di = control.getOverlays();
          var activelayers = getKeyByValue(di,true);
          var campos = activelayers.split("<");
          var capa = campos[0];
         


          var cap="json_".concat(capa); 

          

        mydata.push(capas[cap]);
        

        actualizarTabla();
            return cap;
            
}
        /*ESTO SIRVE PARA LINKEAR CADA NOMBRE CON SU VARIABLE*/
        var capas = {
                        "json_Inversion_cobertura": json_Inversion_cobertura_1
                        


                    };
            
            
        function filterFunc() {
          map.eachLayer(function(lyr){
          if ("options" in lyr && "dataVar" in lyr["options"]){
            features = this[lyr["options"]["dataVar"]].features.slice(0);
            try{
              for (key in Filters){
                if (Filters[key] == "str" || Filters[key] == "bool"){
                  var selection = [];
                  var options = document.getElementById("sel_" + key).options
                  for (var i=0; i < options.length; i++) {
                    if (options[i].selected) selection.push(options[i].value);
                  }
                    try{
                      if (key in features[0].properties){
                        for (i = features.length - 1;
                          i >= 0; --i){
                          if (selection.indexOf(
                          features[i].properties[key])<0
                          && selection.length>0) {
                          features.splice(i,1);                        
                          
                          }
                        }
                      }
                    } catch(err){
                  }
                }
                if (Filters[key] == "int"){
                  sliderVals =  document.getElementById(
                    "div_" + key).noUiSlider.get();
                  try{
                    if (key in features[0].properties){
                    for (i = features.length - 1; i >= 0; --i){
                      if (parseInt(features[i].properties[key])
                          < sliderVals[0]
                          || parseInt(features[i].properties[key])
                          > sliderVals[1]){
                            features.splice(i,1);
                          }
                        }
                      }
                    } catch(err){
                    }
                  }
                if (Filters[key] == "real"){
                  sliderVals =  document.getElementById(
                    "div_" + key).noUiSlider.get();
                  try{
                    if (key in features[0].properties){
                    for (i = features.length - 1; i >= 0; --i){
                      if (features[i].properties[key]
                          < sliderVals[0]
                          || features[i].properties[key]
                          > sliderVals[1]){
                            features.splice(i,1);
                          }
                        }
                      }
                    } catch(err){
                    }
                  }
                if (Filters[key] == "date"
                  || Filters[key] == "datetime"
                  || Filters[key] == "time"){
                  try{
                    if (key in features[0].properties){
                      HTMLkey = key.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g, '');
                      startdate = document.getElementById("dat_" +
                        HTMLkey + "_date1").value.replace(" ", "T");
                      enddate = document.getElementById("dat_" +
                        HTMLkey + "_date2").value.replace(" ", "T");
                      for (i = features.length - 1; i >= 0; --i){
                        if (features[i].properties[key] < startdate
                          || features[i].properties[key] > enddate){
                          features.splice(i,1);
                        }
                      }
                    }
                  } catch(err){
                  }
                }
              }
            } catch(err){
            }
          this[lyr["options"]["layerName"]].clearLayers();
          this[lyr["options"]["layerName"]].addData(features);
          var bounds = this[lyr["options"]["layerName"]].getBounds();
          map.fitBounds(bounds);
          }
          })
        }
           var div_departamen = document.getElementById("menup")
            
            // document.getElementById("menu").appendChild(
             //   document.createElement("div"));
            //var div_Departamento = document.createElement('div');
            //div_Departamento.id = "div_Departamento";
            //div_Departamento.className= "filterselect";
            //document.getElementById("menu").appendChild(div_Departamento);
            sel_departamen = document.createElement('select');
            sel_departamen.multiple = true;
            //sel_Departamento.size = 10;
            sel_departamen.id = "sel_departamen";
            sel_departamen.className ="custom-selecto"
            var departamen_options_str = "<option value='' unselected></option>";
            sel_departamen.onchange = function(){
                activa(); 
                filterFunc();
                mostrarTabla();
            };
            departamen_options_str  += '<option value="Alta Verapaz">Alta Verapaz</option>';
            departamen_options_str  += '<option value="Baja Verapaz">Baja Verapaz</option>';
            departamen_options_str  += '<option value="Chimaltenango">Chimaltenango</option>';
            departamen_options_str  += '<option value="Chiquimula">Chiquimula</option>';
            departamen_options_str  += '<option value="El Progreso">El Progreso</option>';
            departamen_options_str  += '<option value="Escuintla">Escuintla</option>';
            departamen_options_str  += '<option value="Guatemala">Guatemala</option>';
            departamen_options_str  += '<option value="Huehuetenango">Huehuetenango</option>';
            departamen_options_str  += '<option value="Izabal">Izabal</option>';
            departamen_options_str  += '<option value="Jalapa">Jalapa</option>';
            departamen_options_str  += '<option value="Jutiapa">Jutiapa</option>';
            departamen_options_str  += '<option value="Petén">Petén</option>';
            departamen_options_str  += '<option value="Quetzaltenango">Quetzaltenango</option>';
            departamen_options_str  += '<option value="Quiché">Quiché</option>';
            departamen_options_str  += '<option value="Retalhuleu">Retalhuleu</option>';
            departamen_options_str  += '<option value="Sacatepéquez">Sacatepéquez</option>';
            departamen_options_str  += '<option value="San Marcos">San Marcos</option>';
            departamen_options_str  += '<option value="Santa Rosa">Santa Rosa</option>';
            departamen_options_str  += '<option value="Sololá">Sololá</option>';
            departamen_options_str  += '<option value="Suchitepéquez">Suchitepéquez</option>';
            departamen_options_str  += '<option value="Totonicapán">Totonicapán</option>';
            departamen_options_str  += '<option value="Zacapa">Zacapa</option>';
            sel_departamen.innerHTML = departamen_options_str;
            div_departamen.appendChild(sel_departamen);
            var lab_departamen = document.createElement('div');
            lab_departamen.innerHTML = 'departamen';
            lab_departamen.className = 'filterlabel';
            div_departamen.appendChild(lab_departamen);
            var reset_departamen = document.createElement('div');
            reset_departamen.innerHTML = '<button type="button" class="btn btn-primary">Borrar filtros</button>';
            reset_departamen.className = 'inline';
            var cobertura = document.createElement('div');
            cobertura.innerHTML = '<a href="index.html" class="btn btn-primary inline">Jovenes sin báscos</a>';
            cobertura.className = 'inline';
            reset_departamen.onclick = function() {
                var options = document.getElementById("sel_departamen").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
                mostrarTabla();
                activa();
            };

  //          cobertura.onclick = function(){
    //            window.location.href = "http://mapas.exitoescolar.org/mapa/mapa11/";
      //      }
            div_departamen.appendChild(reset_departamen);
            div_departamen.appendChild(cobertura);
            


    

        </script>

        <script src="js/tabla.datos1.js"></script>
    </body>
</html>
